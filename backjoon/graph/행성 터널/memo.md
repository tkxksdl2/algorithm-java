[행성 터널](https://www.acmicpc.net/problem/2887)

---

문제에서 요구하는 것은 최소 신장 트리이다. 당연히 크루스칼/프림 알고리즘을 사용하면 풀 수 있는 문제이다.

그러나 특별히 문제되는 점은 노드의 개수가 100000개이며, 간선은 주어지지 않으며 각 노드의 위치를 기준으로 모든 노드가 서로 연결 될 수 있다.

연결되는 기준은 x, y, z 값이므로 모든 노드를 고려하게 되면 3 \* (n-1)^2 이라는 굉장히 큰 수를 참조하므로 시간 안에 풀이가 불가능하다.

다만 x, y, z값은 각 다른 좌표계와 별개로 움직이므로 각 노드 사이를 연결하는 간선이 총 3개 있다고 보아도 무방하다. 그리고 x, y, z 중 하나의 값만 생각한다고 고려하면, 각 좌표값을 정렬하는 것 만으로도 이웃한 노드와 연결하여 최소신장 트리가 만들어진다.

이 최소신장트리의 간선들은 다시말해 x, y, z 좌표계에서 가장 인접한 노드와 연결되는 간선들이고, 중간 노드를 거치지 않고 가장 빠르게 다른 노드로 갈 수 있는 모든 간선들이다.

따라서 세 좌표계를 모두 참조하는 최소 신장트리가 존재할 때, 이 최소신장트리의 간선은 모두 위에서 만든 각각의 좌표계의 간선들에서 찾을 수 있다. 최소신장 트리의 간선들은 다른 노드를 거치지 않은 가장 빠른 경로를 사용할 것이기 때문이다.

이렇게 간선을 걸러내고 나면 간선의 개수는 약 3n정도가 되고, 이 간선들을 사용해서 크루스칼 알고리즘을 사용하면 된다. 각 노드의 부모를 확인하고 부모가 같지 않다면 갱신해주면서 비용을 추가해준다.

추가로 이 문제의 경우 부모를 찾는 알고리즘에서 경로 압축을 적절히 해주어야 한다. 시간 제한이 빡빡하므로 경로 압축이 되지 않으거나 부모를 정하는 규칙이 적절하지 않으면 시간 초과가 발생한다.
